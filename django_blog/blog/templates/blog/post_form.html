{% extends "blog/base.html" %}

{% block content %}
  <div class="container mt-4">
    <h2>
      {% if form.instance.pk %}
        Update Post
      {% else %}
        Create New Post
      {% endif %}
    </h2>

    <form method="POST">
      {% csrf_token %}
      {{ form.non_field_errors }}

      <div class="mb-3">
        {{ form.title.label_tag }}
        {{ form.title }}
        {% for error in form.title.errors %}
          <div class="text-danger">{{ error }}</div>
        {% endfor %}
      </div>

      <div class="mb-3">
        {{ form.content.label_tag }}
        {{ form.content }}
        {% for error in form.content.errors %}
          <div class="text-danger">{{ error }}</div>
        {% endfor %}
      </div>

      <div class="mb-3">
        {{ form.tags.label_tag }}
        {{ form.tags }}  {# TagWidget renders input for adding multiple tags #}
        {% for error in form.tags.errors %}
          <div class="text-danger">{{ error }}</div>
        {% endfor %}
      </div>

      <button type="submit" class="btn btn-primary">
        {% if form.instance.pk %}Update{% else %}Create{% endif %}
      </button>
      <a href="{% url 'post-list' %}" class="btn btn-secondary">Cancel</a>
    </form>
  </div>
{% endblock %}
